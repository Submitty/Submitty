<div class="content">
    <h1> Live Chat </h1>
    {% if user_admin %} <!--only instructors can create chat rooms-->
        <a href='javascript:newChatroomForm()' data-testid="new-chatroom-btn" class="btn btn-primary">New Chatroom</a>
    {% endif %}
    <hr>
    <div class="chatrooms-table-wrapper table-responsive">
        <h2> Chatrooms </h2>
        <table id="chatrooms-table" class="table table-striped">
            {% if user_admin %} <!--instructor's view-->
                <col style="width: 2.5%">
                <col style="width: 5%">
                <col style="width: 20%">
                <col style="width: 35%">
                <col style="width: 12.5%">
                <col style="width: 15%">
                <thead>
                    <tr>
                        <th scope="col" style="text-align: left"></th>
                        <th scope="col" style="text-align: left"></th>
                        <th scope="col">Name</th>
                        <th scope="col">Description</th>
                        <th scope="col"></th>
                        <th scope="col" style="text-align: right"></th>
                    </tr>
                </thead>
                <tbody data-testid="chatroom-list-item">
                    {% for chatroom in chatrooms %}
                        {% include "chat/ChatroomRow.twig" with 
                        {"id": chatroom.getId(),
                        "description": chatroom.getDescription(),
                        "title": chatroom.getTitle(),
                        "isAllowAnon": chatroom.isAllowAnon(),
                        "isAdmin": user_admin,
                        "isActive": chatroom.isActive()} %}
                    {% endfor %}
                </tbody>
            {% else %} <!--student's view-->
                <col style="width: 25%">
                <col style="width: 25%">
                <col style="width: 25%">
                <col style="width: 25%">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Host</th>
                        <th scope="col">Description</th>
                        <th scope="col" style="text-align: left"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for chatroom in chatrooms %}
                        {% include "chat/ChatroomRow.twig" with 
                        { "id": chatroom.getId(),
                        "description": chatroom.getDescription(),
                        "title": chatroom.getTitle(),
                        "hostName": chatroom.getHostName(),
                        "isAllowAnon": chatroom.isAllowAnon(),
                        "isAdmin": user_admin,
                        "isActive": chatroom.isActive(),
                        "baseUrl": base_url } %}
                    {% endfor %}
                </tbody>
            {% endif %}
        </table>
    </div>
</div>
<script type="application/json" id="all-chatroom-data">
    {
        "user_admin": "{{ user_admin }}",
        "base_url": "{{ base_url }}"
    }
</script>
{% include('chat/CreateChatroomForm.twig') %}
{% include('chat/EditChatroomForm.twig') %}
