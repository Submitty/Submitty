{
  "required_capabilities": "default",
  "autograding_method": "docker",
  "container_options": {
    "container_image": "submitty/libreoffice-writer:latest"
  },

  // 2 mb maximum submission size
  "max_submission_size": 2000000,

  "resource_limits": {
    "RLIMIT_FSIZE": 99000000,
    "RLIMIT_NPROC": 100,
    "RLIMIT_SIGPENDING": 100,
    "RLIMIT_MSGQUEUE": 100,
    "RLIMIT_RTTIME": 1000000,
    "RLIMIT_CPU": 600
  },

  // needed for /usr/bin/mv
  "allow_system_calls": [
    "COMMUNICATIONS_AND_NETWORKING_INTERPROCESS_COMMUNICATION",
    "COMMUNICATIONS_AND_NETWORKING_SIGNALS",
    "COMMUNICATIONS_AND_NETWORKING_SOCKETS",
    "COMMUNICATIONS_AND_NETWORKING_SOCKETS_MINIMAL",
    "FILE_MANAGEMENT_MOVE_DELETE_RENAME_FILE_DIRECTORY",
    "FILE_MANAGEMENT_PERMISSIONS",
    "FILE_MANAGEMENT_RARE",
    "INFORMATION_MAINTENANCE_ADVANCED",
    "PROCESS_CONTROL_ADVANCED",
    "PROCESS_CONTROL_MEMORY_ADVANCED",
    "PROCESS_CONTROL_NEW_PROCESS_THREAD",
    "PROCESS_CONTROL_SYNCHRONIZATION",
    "UNKNOWN"
  ],

  "autograding": {
    "submission_to_compilation": [],
    "submission_to_runner": ["*.docx"],
    "submission_to_validation": [],
    "work_to_details": ["test01/student_file.pdf"],
    "work_to_public": ["test01/student_file.pdf"]
  },

  "assignment_message": "Submit a word document and we will show it as a PDF.",

  "testcases": [
    {
      "title": "Convert Word Document to PDF",
      "command": [
        "mv *.docx student_file.docx",
        // BUILD the simple blank page latex file
        "/usr/lib/libreoffice/program/soffice -env:UserInstallation=file:///tmp/ --headless --convert-to pdf student_file.docx"
      ],
      "points": 1,
      "validation": [
        {
          "actual_file": "student_file.pdf",
          "deduction": 1.0,
          "description": "Check if the PDF file was created",
          "method": "fileExists",
          "show_actual": "always",
          "show_message": "on_failure",
          "failure_message": "We failed to create the PDF file from your Word document. Please ensure that your Word document is valid and can be converted to PDF."
        },
        {
          "actual_file": "STDERR_0.txt",
          "method": "fileExists",
          "show_actual": "never",
          "show_message": "never"
        },
        {
          "actual_file": "STDOUT_1.txt",
          "method": "fileExists",
          "show_actual": "never",
          "show_message": "never"
        },
        {
          "actual_file": "STDERR_1.txt",
          "method": "fileExists",
          "show_actual": "never",
          "show_message": "never"
        },
        {
          "actual_file": "execute_logfile.txt",
          "method": "fileExists",
          "show_actual": "never",
          "show_message": "never"
        }
      ]
    }
  ]
}
